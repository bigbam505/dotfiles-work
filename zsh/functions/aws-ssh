# will attempt to login to the IP address of the aws instance id

aws-ssh() {
  INSTANCE_ID=$1
  if [[ -z $INSTANCE_ID ]]; then
    echo 'Need to pass in an instance id USAGE: `aws-ssh <instance-id>`'
    return 1
  fi

  SEARCH_STRING="ec2_instance_id:$INSTANCE_ID"

  IP_ADDRESS="$(knife search $SEARCH_STRING -F json -a ipaddress | jq -r '.rows[0][].ipaddress')"

  if [[ -z $IP_ADDRESS ]]; then
    echo "IP Address not found for $INSTANCE_ID"
    return 1
  fi

  echo "Attempting to login to $INSTANCE_ID via $IP_ADDRESS"

  ssh $IP_ADDRESS
}
